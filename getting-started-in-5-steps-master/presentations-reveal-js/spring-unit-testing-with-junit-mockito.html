<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Spring Microservices - in28Minutes</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">
		<link rel="stylesheet" href="css/reveal-override.css"/>

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">


                <!-- Slides are separated by three dashes (quick 'n dirty regular expression) -->
                <section data-markdown data-separator="---">
                    <script type="text/template">


# Unit Testing
## JUnit
---
# Unit Testing
## Spring Boot, JUnit & Mockito
---
![](images/TestPyramid.png)
---
![](images/JavaEETypicalArchitecture-Overview.png)
---
# JUnit 5
- JUnit Platform = Building Blocks
- JUnit Jupiter = new programming model +  extension model + extensions - assertions, annotations
- JUnit Vintage = Support for old JUnit version ( 3 & 4)
---
## JUnit 5 vs JUnit 4
- @BeforeAll instead of @BeforeClass
- @AfterAll instead of @AfterClass
- @BeforeEach instead of @Before
- @AfterEach instead of @After
- @Disable instead of @Ignore
- @Tag  instead of @Category
- assertThrows instead of expected attribute
- assertTimeout instead of timeout attribute

---
## New in JUnit 5
- @Nested for nested tests
- @RepeatedTest to executed tests multiple times
---
## Good Unit Tests
---
### Readable
> One look at the test and you know what is being tested!
---
#### Bad Test
![](images/BadTest.png)
---
#### Good Test
![](images/GoodTest.png)
---
### Fast
> What happens if unit tests take a long time to run?
---
### Isolated
> Fails only when there is an issue with code!
---
![](images/JavaEETypicalArchitecture-Overview.png)
---
## Run Often
- What is the use of having unit tests which are not run frequently?
- What happens if you do not commit code often?
---
## Great Asserts
- AssertJ
- Hamcrest
- JSONassert
---
## Easier Static Imports
```
Window > Preferences > Java > Editor > Content Assist > Favorites
org.junit.Assert
org.mockito.BDDMockito
org.mockito.Mockito
org.assertj.core.api.Assertions
org.hamcrest.Matchers
org.hamcrest.CoreMatchers
```
---
## Recommended Reading
- http://xunitpatterns.com
---
# Request Methods
- GET
- POST
- PUT
- DELETE
---
# Response Status
- 200 - SUCCESS
- 404 - RESOURCE NOT FOUND
- 400 - BAD REQUEST
- 201 - CREATED
- 401 - UNAUTHORIZED
- 500 - SERVER ERROR
---
```java
RequestBuilder requestBuilder = MockMvcRequestBuilders.post(
		"/items")
		.accept(MediaType.APPLICATION_JSON)
		.content("{\"id\": 1,\"name\":\"Ball\",
				\"price\":10,\"quantity\":100}")
		.contentType(MediaType.APPLICATION_JSON);

MvcResult result = mockMvc.perform(requestBuilder)
					.andExpect(status().isCreated())
					.andExpect(header()
						.string("location", 
						containsString("/item/")))
					.andReturn();

```
---
## Spring Boot Unit Testing
spring-boot-starter-test “Starter” includes
- JUnit
- Spring Test & Spring Boot Test
- AssertJ
- Hamcrest
- Mockito 
- JSONassert
- JsonPath
---
![](images/In28Minutes-FocusAreas.png)
---
![](images/In28MinutesCourseRoadMap-May2017.png)
                    </script>
                </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>


		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: false,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
